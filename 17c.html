# 创建UI元素

self create_widgets()

def create_widgets(self):

# 按钮框架

btn_frame = tk Frame(self root)

btn_frame pack(side=tk TOP, pady=10)

# 生成漫画按钮

generate_btn = tk Button(

btn_frame,

text="生成新漫画",

command=self generate_new_comic

)

generate_btn pack(side=tk LEFT, padx=5)

# 保存按钮

save_btn = tk Button(

btn_frame,

text="保存漫画",

command=self save_comic

)

save_btn pack(side=tk LEFT, padx=5)

# 漫画显示区域

self canvas = tk Canvas(self root, width=800, height=600)

self canvas pack()

# 当前漫画数据

self current_comic = None

def generate_new_comic(self):

self current_comic = self comic_gen generate_comic_panel()

self display_comic()

def display_comic(self):

self canvas delete("all")

if not self current_comic:

return

# 显示场景（简化版）

# 实际应用中需要更复杂的图像合成

scene_img = self current_comic["images"][2]

# 这里应该将matplotlib图像转换为PIL图像再显示

# 显示对话框文本

for i, bubble in enumerate(self current_comic["dialogues"]):

y_pos = 50 + i * 150

for j, line in enumerate(bubble["lines"]):

self canvas create_text(

bubble["x"] * 80 + 50,

y_pos + j * 20,

text=line,

font=("Arial", 12)

)

def save_comic(self):

if not self current_comic:

return

file_path = filedialog asksaveasfilename(

defaultextension=" png",

filetypes=[("PNG files", "* png"), ("All files", "* *")]

)

if file_path:

# 实际应用中需要实现漫画合成和保存逻辑

print(f"Saving comic to {file_path}")
